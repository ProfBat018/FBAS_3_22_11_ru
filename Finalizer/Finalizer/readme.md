# Тема урока: Память в .NET Core

И так, все мы знаем что у нас есть две части памяти: 
1. Stack
2. Heap

Конечно же, .NET не исключение. В 32х системах размер стека равен 1мб, а в 64х 4мб.

## Stack
Stack - работает по принципу LIFO. 
Все структуры(значимые типы данных хранятся в Stack)
Все переменные, даже если он ссылается в Heap хрвнятся в Stack

## Heap
С Heap все совсем не однозначно. 
Все ссылочные типы данных хранятся в Heap.

Сам HEAP делится на 2 части:
1. Managed Heap. (привычный нам HEAP)
2. Unmanaged Heap (тут хранятся классы, которые не сразу удаляются а работают с IDisposable)


### Managed Heap

Он делится на 3 части 
1. SOH (Small Object Heap) - тут хранятся объекты размером меньше 85кб
2. LOH (Large Object Heap) - тут хранятся объекты размером больше 85кб
3. POH (Pinned Object Heap) - тут хранятся объекты, которые не могут быть перемещены в другое место в памяти. (например, если мы используем unsafe код)

#### SOH
SOH делится на 3 части:
* Gen0
* Gen1
* Gen2

Каждый объект, который создается в .NET Core, помещается в Gen0.

Переход из Gen2 в Gen1 происходит. Когда какой-то Gen заполняется 
или объект в нем перестал часто использоваться(что тоже влияет на вызов),
то тогда вызывается GC, а он в свою очередь сразу чистит все. 

#### LOH

LOH - это тоже самое, что и SOH, только тут хранятся объекты размером больше 85кб.

Он уже не делится на Gen, а просто очищается GC, когда он заполняется.

#### POH

POH - это тоже самое, что и SOH, только тут хранятся объекты, которые не могут быть перемещены в другое место в памяти. (например, если мы используем unsafe код)

Например в вашем приложении есть графический список. Его элементы могут быть в POH, так как 
до конца работы программы там будут большие элементы. 



